<?xml version="1.0" encoding="utf-8" ?>
<Patch>

  <!-- ========== Primitive Weapons ========== -->

  <!-- ========== Blowgun ========== -->

  <Operation Class="PatchOperationRemove">
    <xpath>*/ThingDef[defName="Gun_Blowgun"]</xpath>
  </Operation>

  <!-- ========== Throwing Axes ========== -->

  <Operation Class="PatchOperationRemove">
    <xpath>*/ThingDef[defName="Gun_ThrowingAxes"]</xpath>
  </Operation>

  <!-- ========== Throwing Clubs ========== -->

  <Operation Class="PatchOperationRemove">
    <xpath>*/ThingDef[defName="Gun_ThrowingClubs"]</xpath>
  </Operation>

  <!-- ========== EMP Rifle (Which is removed) ========== -->

  <Operation Class="PatchOperationRemove">
    <xpath>*/ThingDef[defName="Gun_EMPRifle"]</xpath>
  </Operation>

  <!-- ==================== Compound Bow ==================== -->

    <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Bow_Compound</defName>
    <statBases>
      <SightsEfficiency>0.75</SightsEfficiency>
      <ShotSpread>0.8</ShotSpread>
      <SwayFactor>2</SwayFactor>
      <Bulk>4.00</Bulk>
      <RangedWeapon_Cooldown>0.9</RangedWeapon_Cooldown>
    </statBases>
    <costList>
      <Steel>15</Steel>
      <Chemfuel>40</Chemfuel>
      <Component>2</Component>
    </costList>
    <Properties>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Projectile_StreamlinedArrow_Stone</defaultProjectile>
      <warmupTime>0.9</warmupTime>
      <range>40</range>
      <soundCast>BowRecurve</soundCast>
    </Properties>
    <AmmoUser>
      <ammoSet>AmmoSet_StreamlinedArrow</ammoSet>
    </AmmoUser>
    <FireModes />
    <weaponTags>
      <li>CE_Bow</li>
    </weaponTags>
    <researchPrerequisite>Machining</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Bow_Compound"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <id>limb</id>
		  <label>limb</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <armorPenetration>0.102</armorPenetration>
			<linkedBodyPartsGroup>Base</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>nock</id>
		  <label>nock</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <armorPenetration>0.075</armorPenetration>
			<linkedBodyPartsGroup>Point</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Modern Weapons ========== -->

  <!-- ========== Heavy Revolver ========== -->
  
  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_PistolHeavyRevolver</defName>
    <statBases>
      <Mass>1.39</Mass>
      <RangedWeapon_Cooldown>0.39</RangedWeapon_Cooldown>
      <SightsEfficiency>0.7</SightsEfficiency>
      <ShotSpread>0.14</ShotSpread>
      <SwayFactor>1.52</SwayFactor>
      <Bulk>3</Bulk>
      <WorkToMake>7000</WorkToMake>
    </statBases>
    <costList>
      <Steel>30</Steel>
      <Component>2</Component>
    </costList>
    <Properties>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_454Casull_FMJ</defaultProjectile>
      <warmupTime>0.6</warmupTime>
      <range>14</range>
      <soundCast>RS_ShotRevolver</soundCast>
      <soundCastTail>GunTail_Light</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>5</magazineSize>
      <reloadTime>3.5</reloadTime>
      <ammoSet>AmmoSet_454Casull</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiUseBurstMode>FALSE</aiUseBurstMode>
    </FireModes>
    <weaponTags>
      <li>CE_Sidearm</li>
      <li>CE_AI_Pistol</li>
      <li>CE_OneHandedWeapon</li>
    </weaponTags>
    <researchPrerequisite>Gunsmithing</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_PistolHeavyRevolver"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>grip</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.102</armorPenetration>
          <linkedBodyPartsGroup>Grip</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <armorPenetration>0.102</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <armorPenetration>0.075</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Carbine ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_RSCarbine</defName>
    <statBases>
      <Mass>3.26</Mass>
      <RangedWeapon_Cooldown>0.36</RangedWeapon_Cooldown>
      <SightsEfficiency>1</SightsEfficiency>
      <ShotSpread>0.07</ShotSpread>
      <SwayFactor>1.45</SwayFactor>
      <Bulk>7.50</Bulk>
	  <WorkToMake>27000</WorkToMake>
    </statBases>
    <costList>
      <Steel>50</Steel>
      <Component>5</Component>
      <Chemfuel>10</Chemfuel>
    </costList>
    <Properties>
      <recoilAmount>1.53</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_556x45mmNATO_FMJ</defaultProjectile>
      <warmupTime>1.1</warmupTime>
      <range>52</range>
      <burstShotCount>6</burstShotCount>
      <ticksBetweenBurstShots>4</ticksBetweenBurstShots>
      <soundCast>RS_ShotCarbine</soundCast>
      <soundCastTail>GunTail_Medium</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>30</magazineSize>
      <reloadTime>4</reloadTime>
      <ammoSet>AmmoSet_556x45mmNATO</ammoSet>
    </AmmoUser>
    <FireModes>
      <aimedBurstShotCount>3</aimedBurstShotCount>
      <aiUseBurstMode>TRUE</aiUseBurstMode>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <weaponTags>
	  <li>CE_AI_Rifle</li>
    </weaponTags>
    <researchPrerequisite>PrecisionRifling</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_RSCarbine"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- =================== Anti-Material Rifle ===================== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_RSAMRifle</defName>
    <statBases>
      <Mass>7.30</Mass>
      <RangedWeapon_Cooldown>1.16</RangedWeapon_Cooldown>
      <SightsEfficiency>2.6</SightsEfficiency>
      <ShotSpread>0.02</ShotSpread>
      <SwayFactor>1.86</SwayFactor>
      <Bulk>11.80</Bulk>
      <WorkToMake>46000</WorkToMake>
    </statBases>
    <costList>
      <Steel>90</Steel>
      <Component>7</Component>
      <Chemfuel>25</Chemfuel>
    </costList>
    <Properties>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_50BMG_FMJ</defaultProjectile>
      <warmupTime>1.6</warmupTime>
      <range>86</range>
      <soundCast>RS_ShotAMRifle</soundCast>
      <soundCastTail>GunTail_Heavy</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>10</magazineSize>
      <reloadTime>6</reloadTime>
      <ammoSet>AmmoSet_50BMG</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <weaponTags>
      <li>CE_AI_Rifle</li>
    </weaponTags>
    <researchPrerequisite>PrecisionRifling</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_RSAMRifle"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Repeater rifle ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_Repeater</defName>
    <statBases>
      <Mass>3.1</Mass>
      <RangedWeapon_Cooldown>0.50</RangedWeapon_Cooldown>
      <SightsEfficiency>1</SightsEfficiency>
      <ShotSpread>0.08</ShotSpread>
      <SwayFactor>1.68</SwayFactor>
      <Bulk>9.70</Bulk>
	  <WorkToMake>12000</WorkToMake>
    </statBases>
    <costList>
      <Steel>55</Steel>
      <WoodLog>15</WoodLog>
      <Component>1</Component>
    </costList>
    <Properties>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_44Magnum_FMJ</defaultProjectile>
      <warmupTime>1.4</warmupTime>
      <range>52</range>
      <soundCast>RS_ShotRevolver</soundCast>
      <soundCastTail>GunTail_Heavy</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>9</magazineSize>
      <reloadTime>6</reloadTime>
      <ammoSet>AmmoSet_44Magnum</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <weaponTags>
	  <li>CE_AI_Rifle</li>
    </weaponTags>
    <researchPrerequisite>Gunsmithing</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_Repeater"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Automatic rifle ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_AutomaticRifle</defName>
    <statBases>
      <Mass>7.25</Mass>
      <RangedWeapon_Cooldown>0.36</RangedWeapon_Cooldown>
      <SightsEfficiency>1</SightsEfficiency>
      <ShotSpread>0.12</ShotSpread>
      <SwayFactor>1.72</SwayFactor>
      <Bulk>13</Bulk>
	  <WorkToMake>30000</WorkToMake>
    </statBases>
    <costList>
      <Steel>50</Steel>
      <Component>5</Component>
      <WoodLog>5</WoodLog>
    </costList>
    <Properties>
      <recoilAmount>1.73</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_3006Springfield_FMJ</defaultProjectile>
      <warmupTime>1.1</warmupTime>
      <range>55</range>
      <burstShotCount>6</burstShotCount>
      <ticksBetweenBurstShots>5</ticksBetweenBurstShots>
      <soundCast>ShotAssaultRifle</soundCast>
      <soundCastTail>GunTail_Heavy</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>20</magazineSize>
      <reloadTime>5</reloadTime>
      <ammoSet>AmmoSet_3006Springfield</ammoSet>
    </AmmoUser>
    <FireModes>
      <aimedBurstShotCount>3</aimedBurstShotCount>
      <aiUseBurstMode>TRUE</aiUseBurstMode>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <weaponTags>
	  <li>CE_AI_Rifle</li>
    </weaponTags>
    <researchPrerequisite>GasOperation</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_AutomaticRifle"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Repeater rifle ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_Repeater</defName>
    <statBases>
      <Mass>3.1</Mass>
      <RangedWeapon_Cooldown>0.50</RangedWeapon_Cooldown>
      <SightsEfficiency>1</SightsEfficiency>
      <ShotSpread>0.08</ShotSpread>
      <SwayFactor>1.68</SwayFactor>
      <Bulk>9.70</Bulk>
	  <WorkToMake>12000</WorkToMake>
    </statBases>
    <costList>
      <Steel>55</Steel>
      <WoodLog>15</WoodLog>
      <Component>1</Component>
    </costList>
    <Properties>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_44Magnum_FMJ</defaultProjectile>
      <warmupTime>1.4</warmupTime>
      <range>52</range>
      <soundCast>ShotBoltActionRifle</soundCast>
      <soundCastTail>GunTail_Heavy</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>9</magazineSize>
      <reloadTime>6</reloadTime>
      <ammoSet>AmmoSet_44Magnum</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <weaponTags>
	  <li>CE_AI_Rifle</li>
    </weaponTags>
    <researchPrerequisite>Gunsmithing</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_Repeater"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
          <id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Frontier rifle ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_FR</defName>
    <statBases>
      <Mass>4.12</Mass>
      <RangedWeapon_Cooldown>0.36</RangedWeapon_Cooldown>
      <SightsEfficiency>1</SightsEfficiency>
      <ShotSpread>0.03</ShotSpread>
      <SwayFactor>1.52</SwayFactor>
      <Bulk>11.60</Bulk>
	  <WorkToMake>30000</WorkToMake>
    </statBases>
    <costList>
      <Steel>50</Steel>
      <Component>3</Component>
      <WoodLog>15</WoodLog>
    </costList>
    <Properties>
      <recoilAmount>1.43</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_762x51mmNATO_FMJ</defaultProjectile>
      <warmupTime>1.1</warmupTime>
      <range>55</range>
      <soundCast>ShotAssaultRifle</soundCast>
      <soundCastTail>GunTail_Medium</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>20</magazineSize>
      <reloadTime>5</reloadTime>
      <ammoSet>AmmoSet_762x51mmNATO</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiUseBurstMode>TRUE</aiUseBurstMode>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <weaponTags>
	  <li>CE_AI_Rifle</li>
    </weaponTags>
    <researchPrerequisite>GasOperation</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_FR"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Charge Weapons ========== -->

  <!-- ========== Charge Sidearm ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_ChargeSidearm</defName>
    <statBases>
      <Mass>1.05</Mass>
      <RangedWeapon_Cooldown>0.36</RangedWeapon_Cooldown>
      <SightsEfficiency>0.8</SightsEfficiency>
      <ShotSpread>0.12</ShotSpread>
      <SwayFactor>1.32</SwayFactor>
      <Bulk>2.1</Bulk>
	  <WorkToMake>12000</WorkToMake>
    </statBases>
    <costList>
      <Steel>15</Steel>
      <Plasteel>10</Plasteel>
      <Component>5</Component>
      <Chemfuel>5</Chemfuel>
    </costList>
    <Properties>
      <recoilAmount>1.51</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_6x18mmCharged</defaultProjectile>
      <warmupTime>0.6</warmupTime>
      <range>15</range>
      <soundCast>ShotChargeRifle</soundCast>
      <soundCastTail>GunTail_Medium</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>10</magazineSize>
      <reloadTime>4</reloadTime>
      <ammoSet>AmmoSet_6x18mmCharged</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiUseBurstMode>FALSE</aiUseBurstMode>
      <aiAimMode>SuppressFire</aiAimMode>
    </FireModes>
    <weaponTags>
	    <li>CE_Sidearm</li>
      <li>CE_AI_Pistol</li>
      <li>CE_OneHandedWeapon</li>
      <li>AdvancedGun</li>
    </weaponTags>
    <researchPrerequisite>ChargedShot</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_ChargeSidearm"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>grip</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.102</armorPenetration>
          <linkedBodyPartsGroup>Grip</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <armorPenetration>0.102</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>8</power>
          <cooldownTime>1.6</cooldownTime>
          <armorPenetration>0.075</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>  

  <!-- ========== Scatter Charger ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_ScatterCharger</defName>
    <statBases>
      <Mass>3.5</Mass>
      <RangedWeapon_Cooldown>0.39</RangedWeapon_Cooldown>
      <SightsEfficiency>0.8</SightsEfficiency>
      <ShotSpread>0.15</ShotSpread>
      <SwayFactor>1.26</SwayFactor>
      <Bulk>6.7</Bulk>
	  <WorkToMake>32000</WorkToMake>
    </statBases>
    <costList>
      <Steel>35</Steel>
      <Plasteel>25</Plasteel>
      <Component>9</Component>
      <Chemfuel>10</Chemfuel>
    </costList>
    <Properties>
      <recoilAmount>1.51</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_12GaugeCharged</defaultProjectile>
      <warmupTime>0.6</warmupTime>
      <range>16</range>
      <burstShotCount>5</burstShotCount>
      <ticksBetweenBurstShots>6</ticksBetweenBurstShots>
      <soundCast>ShotChargeRifle</soundCast>
      <soundCastTail>GunTail_Medium</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>25</magazineSize>
      <reloadTime>4</reloadTime>
      <ammoSet>AmmoSet_12GaugeCharged</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <weaponTags>
	    <li>CE_AI_AssaultWeapon</li>
      <li>AdvancedGun</li>
    </weaponTags>
    <researchPrerequisite>ChargedShot</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_ScatterCharger"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

<!-- ========== Charge Driver ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_ChargeDriver</defName>
    <statBases>
      <Mass>6</Mass>
      <RangedWeapon_Cooldown>0.39</RangedWeapon_Cooldown>
      <SightsEfficiency>2.6</SightsEfficiency>
      <ShotSpread>0.05</ShotSpread>
      <SwayFactor>1.9</SwayFactor>
      <Bulk>12</Bulk>
	  <WorkToMake>50000</WorkToMake>
    </statBases>
    <costList>
      <Steel>60</Steel>
      <Plasteel>30</Plasteel>
      <Component>10</Component>
      <Chemfuel>15</Chemfuel>
    </costList>
    <Properties>
      <recoilAmount>1.51</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_6x24mmCharged</defaultProjectile>
      <warmupTime>1.6</warmupTime>
      <range>75</range>
      <ticksBetweenBurstShots>4</ticksBetweenBurstShots>
      <burstShotCount>3</burstShotCount>
      <soundCast>ShotChargeRifle</soundCast>
      <soundCastTail>GunTail_Medium</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>15</magazineSize>
      <reloadTime>4</reloadTime>
      <ammoSet>AmmoSet_6x24mmCharged</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiUseBurstMode>TRUE</aiUseBurstMode>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <weaponTags>
	    <li>SniperRifle</li>
      <li>AdvancedGun</li>
    </weaponTags>
    <researchPrerequisite>ChargedShot</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_ChargeDriver"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Burst Charger ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_BurstCharger</defName>
    <statBases>
      <Mass>3.8</Mass>
      <RangedWeapon_Cooldown>0.36</RangedWeapon_Cooldown>
      <SightsEfficiency>1.10</SightsEfficiency>
      <ShotSpread>0.08</ShotSpread>
      <SwayFactor>1.20</SwayFactor>
      <Bulk>11.00</Bulk>
	  <WorkToMake>48000</WorkToMake>
    </statBases>
    <costList>
      <Steel>50</Steel>
      <Plasteel>30</Plasteel>
      <Component>10</Component>
      <Chemfuel>10</Chemfuel>
    </costList>
    <Properties>
      <recoilAmount>1.56</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_8x35mmCharged</defaultProjectile>
      <warmupTime>1.1</warmupTime>
      <range>60</range>
      <ticksBetweenBurstShots>5</ticksBetweenBurstShots>
      <burstShotCount>4</burstShotCount>
      <soundCast>ShotChargeRifle</soundCast>
      <soundCastTail>GunTail_Medium</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>20</magazineSize>
      <reloadTime>5</reloadTime>
      <ammoSet>AmmoSet_8x35mmCharged</ammoSet>
    </AmmoUser>
    <FireModes>
      <aimedBurstShotCount>3</aimedBurstShotCount>
      <aiUseBurstMode>TRUE</aiUseBurstMode>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <weaponTags>
	    <li>CE_AI_Rifle</li>
      <li>AdvancedGun</li>
    </weaponTags>
    <researchPrerequisite>ChargedShot</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_BurstCharger"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Assault Charger ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_BurstCharger</defName>
    <statBases>
      <Mass>8.2</Mass>
      <RangedWeapon_Cooldown>0.36</RangedWeapon_Cooldown>
      <SightsEfficiency>1.10</SightsEfficiency>
      <ShotSpread>0.08</ShotSpread>
      <SwayFactor>1.20</SwayFactor>
      <Bulk>14.00</Bulk>
	  <WorkToMake>56000</WorkToMake>
    </statBases>
    <costList>
      <Steel>60</Steel>
      <Plasteel>30</Plasteel>
      <Component>12</Component>
      <Chemfuel>15</Chemfuel>
    </costList>
    <Properties>
      <recoilAmount>1.56</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_8x35mmCharged</defaultProjectile>
      <warmupTime>1.1</warmupTime>
      <range>60</range>
      <ticksBetweenBurstShots>5</ticksBetweenBurstShots>
      <burstShotCount>4</burstShotCount>
      <soundCast>ShotChargeRifle</soundCast>
      <soundCastTail>GunTail_Heavy</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>20</magazineSize>
      <reloadTime>5</reloadTime>
      <ammoSet>AmmoSet_8x35mmCharged</ammoSet>
    </AmmoUser>
    <FireModes>
      <aimedBurstShotCount>3</aimedBurstShotCount>
      <aiUseBurstMode>TRUE</aiUseBurstMode>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <weaponTags>
			<li>CE_AI_Rifle</li>
      <li>AdvancedGun</li>
    </weaponTags>
    <researchPrerequisite>ChargedShot</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_BurstCharger"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Smart Weapons ========== -->

  <!-- ========== Smart Rifle ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_SmartRifle</defName>
    <statBases>
      <Mass>3.4</Mass>
      <RangedWeapon_Cooldown>0.36</RangedWeapon_Cooldown>
      <SightsEfficiency>1.15</SightsEfficiency>
      <ShotSpread>0.06</ShotSpread>
      <SwayFactor>1.25</SwayFactor>
      <Bulk>9.5</Bulk>
	  <WorkToMake>52000</WorkToMake>
    </statBases>
    <costList>
      <Steel>70</Steel>
      <Plasteel>5</Plasteel>
      <Component>10</Component>
      <Gold>3</Gold>
      <Silver>100</Silver>
      <Chemfuel>10</Chemfuel>
    </costList>
    <Properties>
      <recoilAmount>1.2</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_556x45mmNATO_FMJ</defaultProjectile>
      <warmupTime>1.1</warmupTime>
      <range>60</range>
      <ticksBetweenBurstShots>5</ticksBetweenBurstShots>
      <burstShotCount>4</burstShotCount>
      <soundCast>RS_ShotSmartRifle</soundCast>
      <soundCastTail>GunTail_Medium</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>30</magazineSize>
      <reloadTime>4</reloadTime>
      <ammoSet>AmmoSet_556x45mmNATO</ammoSet>
    </AmmoUser>
    <FireModes>
      <aimedBurstShotCount>3</aimedBurstShotCount>
      <aiUseBurstMode>TRUE</aiUseBurstMode>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <weaponTags>
	  <li>CE_AI_Rifle</li>
      <li>AdvancedGun</li>
    </weaponTags>
    <researchPrerequisite>SmartWeapons</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_SmartRifle"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

  <!-- ========== Smart Pistol ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_SmartPistol</defName>
    <statBases>
      <Mass>1.25</Mass>
      <RangedWeapon_Cooldown>0.36</RangedWeapon_Cooldown>
      <SightsEfficiency>1</SightsEfficiency>
      <ShotSpread>0.12</ShotSpread>
      <SwayFactor>0.87</SwayFactor>
      <Bulk>2.2</Bulk>
	  <WorkToMake>24000</WorkToMake>
    </statBases>
    <costList>
      <Steel>40</Steel>
      <Plasteel>5</Plasteel>
      <Component>8</Component>
      <Gold>3</Gold>
      <Silver>100</Silver>
	  <Chemfuel>5</Chemfuel>
    </costList>
    <Properties>
      <recoilAmount>1.5</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_9x19mmPara_FMJ</defaultProjectile>
      <warmupTime>0.7</warmupTime>
      <range>15</range>
      <soundCast>RS_ShotSmartPistol</soundCast>
      <soundCastTail>GunTail_Light</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
    	<magazineSize>15</magazineSize>
    	<reloadTime>4</reloadTime>
    	<ammoSet>AmmoSet_9x19mmPara</ammoSet>
    </AmmoUser>
    <FireModes>
    	<aiUseBurstMode>FALSE</aiUseBurstMode>
    </FireModes>
    <weaponTags>
	    <li>CE_Sidearm</li>
	    <li>CE_AI_Pistol</li>
      <li>AdvancedGun</li>
      <li>CE_OneHandedWeapon</li>
    </weaponTags>
    <researchPrerequisite>SmartWeapons</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_SmartPistol"]/tools</xpath>
    <value>
	    <tools>
	      <li Class="CombatExtended.ToolCE">
	        <label>grip</label>
	        <capacities>
	          <li>Blunt</li>
	        </capacities>
	        <power>8</power>
	        <cooldownTime>1.6</cooldownTime>
	        <commonality>1.5</commonality>
	        <armorPenetration>0.102</armorPenetration>
	        <linkedBodyPartsGroup>Grip</linkedBodyPartsGroup>
	      </li>
	      <li Class="CombatExtended.ToolCE">
	        <id>barrelblunt</id>
	        <label>barrel</label>
	        <capacities>
	          <li>Blunt</li>
	        </capacities>
	        <power>8</power>
	        <cooldownTime>1.6</cooldownTime>
	        <armorPenetration>0.102</armorPenetration>
	        <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
	      </li>
	      <li Class="CombatExtended.ToolCE">
	        <id>barrelpoke</id>
	        <label>muzzle</label>
	        <capacities>
	          <li>Poke</li>
	        </capacities>
	        <power>8</power>
	        <cooldownTime>1.6</cooldownTime>
	        <armorPenetration>0.075</armorPenetration>
	        <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
	      </li>
	    </tools>
    </value>
  </Operation>

  <!-- ========== Smart SMG ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_SMG</defName>
    <statBases>
      <Mass>3</Mass>
      <RangedWeapon_Cooldown>0.36</RangedWeapon_Cooldown>
      <SightsEfficiency>1.05</SightsEfficiency>
      <ShotSpread>0.12</ShotSpread>
      <SwayFactor>0.87</SwayFactor>
      <Bulk>4.2</Bulk>
			<WorkToMake>37000</WorkToMake>
    </statBases>
    <costList>
      <Steel>50</Steel>
      <Plasteel>5</Plasteel>
      <Component>9</Component>
      <Gold>3</Gold>
      <Silver>100</Silver>
      <Chemfuel>5</Chemfuel>
    </costList>
    <Properties>
      <recoilAmount>2.07</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_9x19mmPara_FMJ</defaultProjectile>
      <warmupTime>0.7</warmupTime>
      <range>15</range>
      <soundCast>RS_ShotSmartSMG</soundCast>
      <soundCastTail>GunTail_Light</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>15</magazineSize>
      <reloadTime>4</reloadTime>
      <ammoSet>AmmoSet_9x19mmPara</ammoSet>
    </AmmoUser>
    <FireModes>
      <aimedBurstShotCount>3</aimedBurstShotCount>
      <aiUseBurstMode>TRUE</aiUseBurstMode>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <weaponTags>
	    <li>CE_Sidearm</li>
	    <li>CE_AI_Pistol</li>
      <li>AdvancedGun</li>
      <li>CE_OneHandedWeapon</li>
    </weaponTags>
    <researchPrerequisite>SmartWeapons</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_SMG"]/tools</xpath>
    <value>
	    <tools>
	        <li Class="CombatExtended.ToolCE">
	          <label>stock</label>
	          <capacities>
	            <li>Blunt</li>
	          </capacities>
	          <power>9</power>
	          <cooldownTime>1.8</cooldownTime>
	          <commonality>1.5</commonality>
	          <armorPenetration>0.11</armorPenetration>
	          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
	        </li>
	        <li Class="CombatExtended.ToolCE">
	        	<id>barrelblunt</id>
	          <label>barrel</label>
	          <capacities>
	            <li>Blunt</li>
	          </capacities>
	          <power>10</power>
	          <cooldownTime>1.9</cooldownTime>
	          <armorPenetration>0.118</armorPenetration>
	          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
	        </li>
	        <li Class="CombatExtended.ToolCE">
	        	<id>barrelpoke</id>
	          <label>muzzle</label>
	          <capacities>
	            <li>Poke</li>
	          </capacities>
	          <power>10</power>
	          <cooldownTime>1.9</cooldownTime>
	          <armorPenetration>0.086</armorPenetration>
	          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
	        </li>
	    </tools>
    </value>
  </Operation>

  <!-- ========== Smart Machine Gun ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>SmartMG</defName>
    <statBases>
      <Mass>7.5</Mass>
      <RangedWeapon_Cooldown>0.36</RangedWeapon_Cooldown>
      <SightsEfficiency>1.1</SightsEfficiency>
      <ShotSpread>0.05</ShotSpread>
      <SwayFactor>1.5</SwayFactor>
      <Bulk>12.8</Bulk>
	  <WorkToMake>58000</WorkToMake>
    </statBases>
    <costList>
      <Steel>75</Steel>
      <Plasteel>10</Plasteel>
      <Component>10</Component>
      <Gold>3</Gold>
      <Silver>100</Silver>
      <Chemfuel>15</Chemfuel>
    </costList>
    <Properties>
      <recoilAmount>1.35</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_556x45mmNATO_FMJ</defaultProjectile>
      <warmupTime>0.7</warmupTime>
      <burstShotCount>10</burstShotCount>
	  <ticksBetweenBurstShots>5</ticksBetweenBurstShots>
      <range>75</range>
      <soundCast>RS_ShotSmartMG</soundCast>
      <soundCastTail>GunTail_Medium</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>100</magazineSize>
      <reloadTime>7</reloadTime>
      <ammoSet>AmmoSet_556x45mmNATO</ammoSet>
    </AmmoUser>
    <FireModes>
      <aimedBurstShotCount>5</aimedBurstShotCount>
      <aiUseBurstMode>TRUE</aiUseBurstMode>
      <aiAimMode>SuppressFire</aiAimMode>
    </FireModes>
    <weaponTags>
	  <li>AdvancedGun</li>
	  <li>CE_MachineGun</li>
	  <li>CE_AI_Suppressive</li>
    </weaponTags>
    <researchPrerequisite>SmartWeapons</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="SmartMG"]/tools</xpath>
    <value>
	    <tools>
	        <li Class="CombatExtended.ToolCE">
	          <label>stock</label>
	          <capacities>
	            <li>Blunt</li>
	          </capacities>
	          <power>9</power>
	          <cooldownTime>1.8</cooldownTime>
	          <commonality>1.5</commonality>
	          <armorPenetration>0.11</armorPenetration>
	          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
	        </li>
	        <li Class="CombatExtended.ToolCE">
	        	<id>barrelblunt</id>
	          <label>barrel</label>
	          <capacities>
	            <li>Blunt</li>
	          </capacities>
	          <power>10</power>
	          <cooldownTime>1.9</cooldownTime>
	          <armorPenetration>0.118</armorPenetration>
	          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
	        </li>
	        <li Class="CombatExtended.ToolCE">
	        	<id>barrelpoke</id>
	          <label>muzzle</label>
	          <capacities>
	            <li>Poke</li>
	          </capacities>
	          <power>10</power>
	          <cooldownTime>1.9</cooldownTime>
	          <armorPenetration>0.086</armorPenetration>
	          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
	        </li>
	    </tools>
    </value>
  </Operation>

  <!-- ========== Smart Sniper Rifle ========== -->

  <Operation Class="CombatExtended.PatchOperationMakeGunCECompatible">
    <defName>Gun_SmartSniperRifle</defName>
    <statBases>
      <Mass>3.85</Mass>
      <RangedWeapon_Cooldown>0.36</RangedWeapon_Cooldown>
      <SightsEfficiency>2.3</SightsEfficiency>
      <ShotSpread>0.06</ShotSpread>
      <SwayFactor>1.25</SwayFactor>
      <Bulk>12.25</Bulk>
	  <WorkToMake>52000</WorkToMake>
    </statBases>
    <costList>
      <Steel>70</Steel>
      <Plasteel>5</Plasteel>
      <Component>9</Component>
      <Gold>3</Gold>
      <Silver>100</Silver>
      <Chemfuel>10</Chemfuel>
    </costList>
    <Properties>
      <recoilAmount>1.2</recoilAmount>
      <verbClass>CombatExtended.Verb_ShootCE</verbClass>
      <hasStandardCommand>true</hasStandardCommand>
      <defaultProjectile>Bullet_338Lapua_FMJ</defaultProjectile>
      <warmupTime>2.1</warmupTime>
      <range>90</range>
      <soundCast>RS_ShotSSR</soundCast>
      <soundCastTail>GunTail_Heavy</soundCastTail>
      <muzzleFlashScale>9</muzzleFlashScale>
    </Properties>
    <AmmoUser>
      <magazineSize>10</magazineSize>
      <reloadTime>4</reloadTime>
      <ammoSet>AmmoSet_338Lapua</ammoSet>
    </AmmoUser>
    <FireModes>
      <aiAimMode>AimedShot</aiAimMode>
    </FireModes>
    <weaponTags>
	  <li>CE_AI_Rifle</li>
      <li>AdvancedGun</li>
      <li>SniperRifle</li>
    </weaponTags>
    <researchPrerequisite>SmartWeapons</researchPrerequisite>
  </Operation>

  <Operation Class="PatchOperationReplace">
    <xpath>*/ThingDef[defName="Gun_SmartSniperRifle"]/tools</xpath>
    <value>
      <tools>
        <li Class="CombatExtended.ToolCE">
          <label>stock</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>9</power>
          <cooldownTime>1.8</cooldownTime>
          <commonality>1.5</commonality>
          <armorPenetration>0.11</armorPenetration>
          <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelblunt</id>
          <label>barrel</label>
          <capacities>
            <li>Blunt</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.118</armorPenetration>
          <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
        </li>
        <li Class="CombatExtended.ToolCE">
        	<id>barrelpoke</id>
          <label>muzzle</label>
          <capacities>
            <li>Poke</li>
          </capacities>
          <power>10</power>
          <cooldownTime>1.9</cooldownTime>
          <armorPenetration>0.086</armorPenetration>
          <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
        </li>
      </tools>
    </value>
  </Operation>

</Patch>


